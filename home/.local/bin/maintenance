#!/usr/bin/env bash

set -eu

[[ -r ~/.bashrc.d/cygwin-setup ]] && . ~/.bashrc.d/cygwin-setup
[[ -r ~/.homesick/repos/homeshick/homeshick.sh ]] && . ~/.homesick/repos/homeshick/homeshick.sh

case "$HOSTNAME" in
	DESKTOP-EB4GLQ5|Multivac)
		case "$(uname)" in
			"CYGWIN_NT-10.0")
				run_cygwin_setup=YesPlease
				refresh_vim_plugins=YesPlease
				update_apt=
				refresh_git=
				check_homeshick=YesPlease
				;;
			*)
				echo "Unrecognised kernel" >&2
				exit 1
				;;
		esac
		;;
	lucy)
		run_cygwin_setup=
		refresh_vim_plugins=YesPlease
		update_apt=YesPlease
		refresh_git=YesPlease
		check_homeshick=YesPlease
		;;
	*)
		echo "Unrecognised host" >&2
		exit 1
		;;
esac

[[ "$run_cygwin_setup" ]] && cygwin_setup
[[ "$refresh_vim_plugins" ]] && refresh-vim-plugins
[[ "$update_apt" ]] && sudo apt update && sudo apt upgrade
[[ "$refresh_git" ]] && refresh-git
[[ "$check_homeshick" ]] && homeshick check

exit 0
