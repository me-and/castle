[[ "$OSTYPE" = 'cygwin' ]] || return 0

# Report any cron output.
if [[ -r ~/cron.log ]]; then
	wrap_message <<-'EOF' >&2
		~/cron.log exists.  Run `vim cron.log` to see the output.
		EOF
fi

if [[ -f /usr/sbin/cron && -x /usr/sbin/cron ]] &&
	command -v pgrep >/dev/null &&
	! pgrep cron >/dev/null
then
	# In an ideal world, I'd always run Cygwin cron as a Windows service.
	# Sometimes that's not viable, so I can put a file in /etc to record that
	# fact and start cron here as a job instead.
	if [[ -e /etc/run-cron-as-job ]]; then
		/usr/sbin/cron
	else
		# Cron is installed and isn't running, so yell.
		wrap_message <<-'EOF' >&2
			cron is installed and not running.  You probably want to fix that!
			EOF
	fi
fi

# vim: ft=bash noet ts=4
